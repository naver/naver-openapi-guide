# 오류 코드

네이버 오픈API를 호출하면 HTTP 상태 코드(HTTP status code)로 API 처리 결과를 반환받습니다. 응답값은 HTTP 응답 본문(HTTP response body)으로 받습니다. 응답값의 형식은 오픈 API에 따라 XML 형식이거나 JSON 형식이 될 수 있습니다. 따라서 API 응답 처리를 할 때는 먼저 HTTP 상태 코드를 통해 정상 처리 여부를 확인하고 응답 형식에 따라 결과를 파싱해 서비스에 사용합니다.

- 정상 호출: HTTP 상태 코드는 '200'이며, 각 API별로 지정된 형식의 결괏값을 반환받습니다.
- 비정상 호출: HTTP 상태 코드는 400번대와 500번대이며, 각 API별로 지정된 오류 코드와 오류 메시지를 반환받습니다.

## 주요 오류 코드

|HTTP 상태 코드(오류 유형)|오류 발생 원인|해결 방법|
|---|------|------|
|401(인증 실패)|클라이언트 아이디와 클라이언트 시크릿이 없거나 잘못된 값인 경우|**[내 애플리케이션](https://developers.naver.com/apps/#/list)** 메뉴에서 클라이언트 아이디와 클라이언트 시크릿을 확인합니다.|
|401(인증 실패)|클라이언트 아이디와 클라이언트 시크릿을 HTTP 헤더에 정확히 설정하지 않고 호출한 경우|클라이언트 아이디와 클라이언트 시크릿은 URL이나 폼이 아니라 지정된 이름의 HTTP 요청 헤더로 전송해야 합니다.|
|401(인증 실패)|API 권한이 설정되지 않은 경우|**[내 애플리케이션](https://developers.naver.com/apps/#/list)** 메뉴의 **API 설정** 탭에서 해당 API가 추가되어 있는지 확인합니다.|
|401(인증 실패)|[네이버 아이디로 로그인](https://developers.naver.com/products/login/api/) API를 호출할 때 접근 토큰 파라미터(access_token)가 없거나 잘못된 값(만료된 접근 토큰)을 설정한 경우|접근 토큰이 HTTP 요청 헤더에 정확하게 설정됐는지, 값이 유효한지 확인합니다.|
|403(서버가 허용하지 않는 호출)|HTTPS가 아닌 HTTP로 호출한 경우|API 요청 URL의 프로토콜이 HTTPS인지 확인합니다.|
|404(API 없음)|API 요청 URL이 잘못된 경우|API 요청 URL에 오류가 있는지 확인합니다.|
|405(메서드 허용 안 함)|HTTP 메서드를 잘못 호출한 경우.  POST 방식으로 호출해야 하는데 GET 방식으로 호출한 경우 등입니다.|API 레퍼런스에서 HTTP 메서드를 확인합니다.|
|400(요청 변수 확인)|필수 요청 변수가 없거나 요청 변수 이름이 잘못된 경우|API 레퍼런스에서 필수 요청 변수를 확인합니다.|
|403(호출 금지)|필수 요청 변수가 없거나 요청 변수 이름이 잘못된 경우|API 레퍼런스에서 필수 요청 변수를 확인합니다.|
|500(서버 오류)|필수 요청 변수가 없거나 요청 변수 이름이 잘못된 경우|API 레퍼런스에서 필수 요청 변수를 확인합니다.|
|400(요청 변수 확인)|요청 변수의 값을 URL 인코딩으로 변환하지 않고 전송한 경우|API 레퍼런스에서 해당 요청 변수를 URL 인코딩으로 변환해야 하는지 확인합니다.|
|403(호출 금지)|요청 변수의 값을 URL 인코딩으로 변환하지 않고 전송한 경우|API 레퍼런스에서 해당 요청 변수를 URL 인코딩으로 변환해야 하는지 확인합니다.|
| 429 (초당 호출 한도 초과 오류)	| 검색 API를 호출할 때 초당 호출량을 초과한 경우	| <https://developers.naver.com/notice/article/10000000000030659365> 참고 |
|500(서버 오류)|요청 변수의 값을 URL 인코딩으로 변환하지 않고 전송한 경우|API 레퍼런스에서 해당 요청 변수를 URL 인코딩으로 변환해야 하는지 확인합니다.|
|429(호출 한도 초과 오류)|오픈 API를 호출할 때 하루 허용량을 초과한 경우|하루 허용량 초과 시 제휴 신청을 합니다.|
|500(서버 오류)|API 호출은 정상적으로 했지만, API 서버 유지 보수나 시스템 오류로 인한 오류가 발생한 경우|[개발자 포럼](https://developers.naver.com/forum)에 오류를 신고합니다.|


## 오류 메시지 형식

오류 메시지의 형식은 오류가 발생하는 위치와 관계없이 동일합니다.

### HTTP 응답 코드 

오류의 성격에 따라 400번대 혹은 500번대 오류 코드가 HTTP 응답 코드로 반환됩니다.

### 오류 메시지 

오류 메시지는 XML 형식이나 JSON 형식으로 반환됩니다. 오류 메시지는 오류의 내용을 담고 있는 `errorMessage` 요소와 오류 코드를 담고 있는 `errorCode` 요소로 구성됩니다. 

`translate.xml`과 같이 API 이름에 확장자인 `.xml`이 있는 API만 XML 형식의 오류 메시지를 반환합니다. 그 외의 API는 JSON 형식의 오류 메시지를 반환합니다.

다음은 XML 형식의 오류 메시지 예입니다.

```xml
<?xml version="1.0" encoding="UTF-8"?>
 <result>
     <errorMessage><![CDATA[Authentication failed (인증 실패하였습니다.)]]></errorMessage>
     <errorCode><![CDATA[024]]></errorCode>
 </result>
```

다음은 JSON 형식의 오류 메시지 예입니다.

```javascript
{
    "errorMessage": "Authentication failed (인증에 실패하였습니다.)",
    "errorCode": "024"
}
```
